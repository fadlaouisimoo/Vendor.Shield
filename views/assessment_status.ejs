<div style="max-width:800px;margin:0 auto;padding:40px 20px">
	<h2 style="color:var(--text);margin-bottom:8px"><%= supplier.name %></h2>
	<p class="muted" style="margin-bottom:24px"><%= t('assessment.statusTitle') %></p>
	
	<% if (assessment) { %>
		<div style="background:var(--card);border:1px solid var(--border);border-radius:12px;padding:24px;margin-bottom:24px">
			<div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:20px;flex-wrap:wrap;gap:12px">
				<div>
					<p style="color:var(--muted);font-size:14px;margin:0"><%= t('assessment.submittedOn') %></p>
					<p style="color:var(--text);font-size:16px;margin:4px 0 0 0"><strong><%= new Date(assessment.created_at).toLocaleString() %></strong></p>
				</div>
				<div>
					<p style="color:var(--muted);font-size:14px;margin:0"><%= t('validation.validationStatus') %></p>
					<div style="margin-top:8px">
						<% if (validationStatusKey === 'PENDING') { %>
							<span class="badge warn" style="background:linear-gradient(180deg,rgba(154,52,18,.9),rgba(194,65,12,.7));">
								<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:6px"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
								<%= getValidationStatus(validationStatusKey, lang) %>
							</span>
						<% } else if (validationStatusKey === 'APPROVED') { %>
							<span class="badge ok">
								<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:6px"><polyline points="20 6 9 17 4 12"/></svg>
								<%= getValidationStatus(validationStatusKey, lang) %>
							</span>
						<% } else if (validationStatusKey === 'REJECTED') { %>
							<span class="badge err">
								<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:6px"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
								<%= getValidationStatus(validationStatusKey, lang) %>
							</span>
						<% } else { %>
							<span class="badge warn">
								<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;margin-right:6px"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg>
								<%= getValidationStatus(validationStatusKey, lang) %>
							</span>
						<% } %>
					</div>
				</div>
			</div>
			
			<% if (validationStatusKey === 'PENDING') { %>
				<div style="background:rgba(245,158,11,.1);border:1px solid rgba(245,158,11,.3);border-radius:8px;padding:16px;margin-top:16px">
					<p style="color:var(--text);margin:0;display:flex;align-items:center;gap:8px">
						<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
							<circle cx="12" cy="12" r="10"/>
							<path d="M12 6v6l4 2"/>
						</svg>
						<%= t('assessment.pendingMessage') %>
					</p>
				</div>
			<% } %>
			
			<% if (validationStatusKey === 'APPROVED' || validationStatusKey === 'REJECTED' || validationStatusKey === 'NEEDS_CLARIFICATION') { %>
				<div style="background:rgba(255,255,255,.02);border:1px solid var(--border);border-radius:8px;padding:16px;margin-top:16px">
					<div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px;margin-bottom:16px">
						<% if (assessment.validated_by) { %>
							<div>
								<p style="color:var(--muted);font-size:13px;margin:0 0 4px 0"><%= t('validation.validatedBy') %></p>
								<p style="color:var(--text);margin:0"><strong><%= assessment.validated_by %></strong></p>
							</div>
						<% } %>
						<% if (assessment.validated_at) { %>
							<div>
								<p style="color:var(--muted);font-size:13px;margin:0 0 4px 0"><%= t('validation.validatedAt') %></p>
								<p style="color:var(--text);margin:0"><strong><%= new Date(assessment.validated_at).toLocaleString() %></strong></p>
							</div>
						<% } %>
					</div>
					
					<% if (assessment.validation_comments) { %>
						<div style="margin-top:16px">
							<p style="color:var(--muted);font-size:13px;margin:0 0 8px 0">
								<% if (validationStatusKey === 'NEEDS_CLARIFICATION') { %>
									<%= t('validation.clarificationRequest') %>:
								<% } else if (validationStatusKey === 'REJECTED') { %>
									<%= t('validation.rejectionReason') %>:
								<% } else { %>
									<%= t('validation.comments') %>:
								<% } %>
							</p>
							<div style="background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.05);border-radius:8px;padding:16px;color:var(--text);line-height:1.6;white-space:pre-wrap">
								<%= assessment.validation_comments.replace(/\n/g, '<br>') %>
							</div>
						</div>
					<% } %>
					
					<% if (validationStatusKey === 'NEEDS_CLARIFICATION') { %>
						<div style="margin-top:20px">
							<a href="<%= urlWithLang('/assessment/' + supplier.invite_token) %>" class="btn" style="display:inline-flex;align-items:center;gap:8px">
								<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
									<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
									<path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
								</svg>
								<%= t('assessment.resubmit') %>
							</a>
						</div>
					<% } %>
				</div>
			<% } %>
		</div>
	<% } else { %>
		<div style="background:var(--card);border:1px solid var(--border);border-radius:12px;padding:24px;text-align:center">
			<p style="color:var(--muted)"><%= t('assessment.noAssessment') %></p>
			<a href="<%= urlWithLang('/assessment/' + supplier.invite_token) %>" class="btn" style="margin-top:16px;display:inline-flex;align-items:center;gap:8px">
				<%= t('assessment.startAssessment') %>
			</a>
		</div>
	<% } %>
	
	<div style="text-align:center;margin-top:32px">
		<a href="<%= urlWithLang('/assessment/' + supplier.invite_token) %>" style="color:var(--muted);text-decoration:none;font-size:14px">
			<%= t('assessment.backToForm') %>
		</a>
	</div>
</div>

